<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- including ECharts file -->
    <script src="./scripts/echarts.min.js"></script>
</head>
<body style="background-color: #666;">
    <!-- prepare a DOM container with width and height -->
    <div id="main" style="width:800px;height:600px;color:#eee;"></div>
    <script type="text/javascript">
        // based on prepared DOM, initialize echarts instance
        var myChart = echarts.init(document.getElementById('main'));
		var xhttp = new XMLHttpRequest();

		xhttp.onreadystatechange = () => {
			if (this.readyState == 4 && this.status == 200) {
				console.log(this.responseText);
			}
		}
		
		setInterval(() => {
			xhttp.open("GET", "http://mattdresser.com:3000/sustain", true);
			xhttp.send();
		}, 5000);

        // specify chart configuration item and data

		var option = {
			title: {
				text: 'Environment Monitor 1',
			},
			tooltip: {
				trigger: 'axis'
			},
			legend: {
				data:['Temperature', 'Humidity']
			},
			xAxis:  {
				type: 'category',
				boundaryGap: false,
				data: ['time1', 'time2', 'time3', 'time4', 'time5', 'time6', 'time7']
			},
			yAxis: {
				type: 'value',
				axisLabel: {
					formatter: '{value} Â°F'
				}
			},
			series: [
				{
					name:'Temperature',
					type:'line',
					data:[11, 11, 15, 13, 12, 13, 10],
					markPoint: {
						data: [
							{type: 'max', name: 'High'},
							{type: 'min', name: 'Low'}
						]
					},
					markLine: {
						data: [
							{type: 'average', name: 'Average'}
						]
					}
				},
				{
					name:'Humidity',
					type:'line',
					data:[1, -2, 2, 5, 3, 2, 0],
					markLine: {
						data: [
							{type: 'average', name: 'Average'}
						]
					}
				}
			]
		};

        // use configuration item and data specified to show chart
        myChart.setOption(option);
    </script>
</body>
</html>
